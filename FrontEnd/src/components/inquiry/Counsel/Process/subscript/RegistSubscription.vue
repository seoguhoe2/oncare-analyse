<template>
  <div class="advanced-info-container">
    <div class="step-title">4ë‹¨ê³„ : ê³„ì•½ ì™„ë£Œ</div>

    <div class="info-card">
      <div class="card-title">ê³„ì•½ ì •ë³´ ì…ë ¥</div>
      
      <div class="input-grid">
        
        <div class="input-group">
          <label class="label">ì´ë¦„ <span class="required">*</span></label>
          <input 
            type="text" 
            class="input-field" 
            :class="{ 'error': errors.name }"
            placeholder="ì´ë¦„ ì…ë ¥" 
            v-model="form.name"
            @blur="validateName"
          />
          <span v-if="errors.name" class="error-message">{{ errors.name }}</span>
        </div>
        <div class="input-group">
          <label class="label">ìƒë…„ì›”ì¼ <span class="required">*</span></label>
          <div class="input-with-icon">
            <input 
              type="date" 
              class="input-field" 
              :class="{ 'error': errors.birthdate }"
              v-model="form.birthdate"
              @blur="validateBirthdate"
            />
            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
          </div>
          <span v-if="errors.birthdate" class="error-message">{{ errors.birthdate }}</span>
        </div>

        <div class="input-group">
          <label class="label">ì—°ë½ì²˜ <span class="required">*</span></label>
          <div class="input-with-icon">
            <input 
              type="text" 
              class="input-field" 
              :class="{ 'error': errors.phone }"
              placeholder="ë²ˆí˜¸ ì…ë ¥" 
              v-model="form.phone"
              @blur="validatePhone"
            />
            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
          </div>
          <span v-if="errors.phone" class="error-message">{{ errors.phone }}</span>
        </div>
        <div class="input-group">
          <label class="label">ì„±ë³„ <span class="required">*</span></label>
          <select 
            class="input-field" 
            :class="{ 'error': errors.gender }"
            v-model="form.gender"
            @blur="validateGender"
          >
            <option value="" disabled>ì„±ë³„ ì„ íƒ</option>
            <option value="M">ë‚¨ì„±</option>
            <option value="F">ì—¬ì„±</option>
          </select>
          <span v-if="errors.gender" class="error-message">{{ errors.gender }}</span>
        </div>

        <div class="input-group full-width">
          <label class="label">ì£¼ì†Œ <span class="required">*</span></label>
          <input 
            type="text" 
            class="input-field" 
            :class="{ 'error': errors.address }"
            placeholder="ì£¼ì†Œ ì…ë ¥" 
            v-model="form.address"
            @blur="validateAddress"
          />
          <span v-if="errors.address" class="error-message">{{ errors.address }}</span>
        </div>

        <div class="input-group">
          <label class="label">ë³´í˜¸ìëª… / ê´€ê³„</label>
          <div class="split-inputs">
            <input 
              type="text" 
              class="input-field flex-grow" 
              placeholder="ë³´í˜¸ì ì´ë¦„" 
              v-model="form.guardianName"
            />
            <input 
              type="text" 
              class="input-field relation-box" 
              placeholder="ê´€ê³„" 
              v-model="form.guardianRelation"
            />
          </div>
        </div>
        <div class="input-group">
          <label class="label">ë³´í˜¸ì ì—°ë½ì²˜</label>
          <div class="input-with-icon">
            <input 
              type="text" 
              class="input-field" 
              placeholder="010-0000-0000" 
              v-model="form.guardianPhone"
            />
            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
            </svg>
          </div>
        </div>

        <div class="input-group">
          <label class="label">ì¥ê¸°ìš”ì–‘ë“±ê¸‰ <span class="required">*</span></label>
          <select 
            class="input-field" 
            :class="{ 'error': errors.level }"
            v-model="form.level"
            @blur="validateLevel"
          >
            <option value="" disabled>ë“±ê¸‰ ì„ íƒ</option>
            <option>1ë“±ê¸‰</option>
            <option>2ë“±ê¸‰</option>
            <option>3ë“±ê¸‰</option>
            <option>4ë“±ê¸‰</option>
            <option>5ë“±ê¸‰</option>
            <option>ì¸ì§€ì§€ì›ë“±ê¸‰</option>
          </select>
          <span v-if="errors.level" class="error-message">{{ errors.level }}</span>
        </div>
        <div class="input-group">
          <label class="label">ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ì¸ì •ë²ˆí˜¸ <span class="required">*</span></label>
          <input 
            type="text" 
            class="input-field" 
            :class="{ 'error': errors.careLevelNumber }"
            placeholder="ì¸ì •ë²ˆí˜¸ ì…ë ¥" 
            v-model="form.careLevelNumber"
            @blur="validateCareLevelNumber"
          />
          <span v-if="errors.careLevelNumber" class="error-message">{{ errors.careLevelNumber }}</span>
        </div>

        <div class="input-group">
          <label class="label">ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ì‹œì‘ì¼ <span class="required">*</span></label>
          <div class="input-with-icon">
            <input 
              type="date" 
              class="input-field" 
              :class="{ 'error': errors.careLevelStartDate }"
              v-model="form.careLevelStartDate"
              @blur="validateDates"
            />
            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
          </div>
          <span v-if="errors.careLevelStartDate" class="error-message">{{ errors.careLevelStartDate }}</span>
        </div>
        <div class="input-group">
          <label class="label">ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ë§Œë£Œì¼ <span class="required">*</span></label>
          <div class="input-with-icon">
            <input 
              type="date" 
              class="input-field" 
              :class="{ 'error': errors.careLevelEndDate }"
              v-model="form.careLevelEndDate"
              @blur="validateDates"
            />
            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>
          </div>
          <span v-if="errors.careLevelEndDate" class="error-message">{{ errors.careLevelEndDate }}</span>
        </div>

        <div class="input-group full-width">
          <label class="label">íƒœê·¸ (3ë‹¨ê³„ì—ì„œ ì„ íƒí•œ ë§¤ì¹­ íƒœê·¸)</label>
          <div class="chip-group">
            <button 
              v-for="tag in matchTags" 
              :key="tag" 
              class="chip-btn" 
              :class="{ active: form.selectedMatchTags.includes(tag) }"
              @click="toggleMatchTag(tag)"
            >
              {{ tag }}
            </button>
          </div>
        </div>

        <div class="input-group full-width">
          <label class="label">ìœ„í—˜ ìš”ì†Œ (3ë‹¨ê³„ì—ì„œ ì„ íƒí•œ ìœ„í—˜ ìš”ì†Œ)</label>
          <div class="chip-group">
            <button 
              v-for="risk in riskFactors" 
              :key="risk" 
              class="chip-btn danger" 
              :class="{ active: form.selectedRisks.includes(risk) }"
              @click="toggleRisk(risk)"
            >
              {{ risk }}
            </button>
          </div>
        </div>

        <div class="input-group full-width">
          <label class="label">ì‚¬ìš©ì í¬ë§ ìŠ¤ì¼€ì¤„ (3ë‹¨ê³„ì—ì„œ ì…ë ¥í•œ ì„œë¹„ìŠ¤ í¬ë§ ì¼ì •)</label>
          <div class="schedule-list">
            <div 
              v-for="(schedule, index) in form.beneficiarySchedules" 
              :key="index"
              class="schedule-item"
            >
              <select v-model="schedule.beneficiaryScheduleDay" class="schedule-select">
                <option value="">ìš”ì¼ ì„ íƒ</option>
                <option value="ì›”">ì›”ìš”ì¼</option>
                <option value="í™”">í™”ìš”ì¼</option>
                <option value="ìˆ˜">ìˆ˜ìš”ì¼</option>
                <option value="ëª©">ëª©ìš”ì¼</option>
                <option value="ê¸ˆ">ê¸ˆìš”ì¼</option>
                <option value="í† ">í† ìš”ì¼</option>
                <option value="ì¼">ì¼ìš”ì¼</option>
              </select>
              <input 
                type="time" 
                v-model="schedule.beneficiaryScheduleStartTime" 
                class="schedule-time"
              />
              <span class="time-separator">~</span>
              <input 
                type="time" 
                v-model="schedule.beneficiaryScheduleEndTime" 
                class="schedule-time"
              />
              <button 
                class="btn-delete-schedule" 
                @click="removeSchedule(index)"
              >
                ì‚­ì œ
              </button>
            </div>
          </div>
          <button class="btn-add-schedule" @click="addSchedule">
            + ì¼ì • ì¶”ê°€
          </button>
        </div>

      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, reactive, onMounted, watch } from 'vue';
import { getMatchTagsApi, getRiskFactorsApi } from '@/api/inquiry/counselApi';

const props = defineProps({
  customer: {
    type: Object,
    default: null
  },
  initialData: {
    type: Object,
    default: null
  }
});

const emit = defineEmits(['has-changes', 'validation-status']);

// APIì—ì„œ ë¶ˆëŸ¬ì˜¬ ë°ì´í„°
const matchTags = ref([]);
const riskFactors = ref([]);

// í¼ ë°ì´í„°
const form = reactive({
  // ê¸°ë³¸ ì •ë³´
  name: '',
  birthdate: '',
  phone: '',
  gender: '',
  address: '',
  guardianName: '',
  guardianRelation: '',
  guardianPhone: '',
  
  // ë“±ê¸‰ ì •ë³´
  level: '',
  careLevelNumber: '',
  careLevelStartDate: '',
  careLevelEndDate: '',
  
  // 3ë‹¨ê³„ì—ì„œ ë°”ì¸ë”©
  selectedMatchTags: [],
  selectedRisks: [],
  beneficiarySchedules: []
});

// ì´ˆê¸° ë°ì´í„° ì €ì¥ (ë³€ê²½ ê°ì§€ìš©)
const initialFormData = ref(null);

// Validation ì—ëŸ¬
const errors = reactive({
  name: '',
  birthdate: '',
  phone: '',
  gender: '',
  address: '',
  level: '',
  careLevelNumber: '',
  careLevelStartDate: '',
  careLevelEndDate: ''
});

// Validation í•¨ìˆ˜ë“¤
const validateName = () => {
  if (!form.name || form.name.trim() === '') {
    errors.name = 'ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.';
    return false;
  }
  errors.name = '';
  return true;
};

const validateBirthdate = () => {
  if (!form.birthdate) {
    errors.birthdate = 'ìƒë…„ì›”ì¼ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.';
    return false;
  }
  errors.birthdate = '';
  return true;
};

const validatePhone = () => {
  if (!form.phone || form.phone.trim() === '') {
    errors.phone = 'ì—°ë½ì²˜ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.';
    return false;
  }
  
  const phoneRegex = /^[0-9-]+$/;
  if (!phoneRegex.test(form.phone)) {
    errors.phone = 'ì˜¬ë°”ë¥¸ ì „í™”ë²ˆí˜¸ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤.';
    return false;
  }
  
  errors.phone = '';
  return true;
};

const validateGender = () => {
  if (!form.gender) {
    errors.gender = 'ì„±ë³„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.';
    return false;
  }
  errors.gender = '';
  return true;
};

const validateAddress = () => {
  if (!form.address || form.address.trim() === '') {
    errors.address = 'ì£¼ì†ŒëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤.';
    return false;
  }
  errors.address = '';
  return true;
};

const validateLevel = () => {
  if (!form.level) {
    errors.level = 'ì¥ê¸°ìš”ì–‘ë“±ê¸‰ì„ ì„ íƒí•´ì£¼ì„¸ìš”.';
    return false;
  }
  errors.level = '';
  return true;
};

const validateCareLevelNumber = () => {
  if (!form.careLevelNumber || form.careLevelNumber.trim() === '') {
    errors.careLevelNumber = 'ì¸ì •ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.';
    return false;
  }
  errors.careLevelNumber = '';
  return true;
};

const validateDates = () => {
  if (!form.careLevelStartDate) {
    errors.careLevelStartDate = 'ì‹œì‘ì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.';
    return false;
  }
  
  if (!form.careLevelEndDate) {
    errors.careLevelEndDate = 'ì¢…ë£Œì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.';
    return false;
  }
  
  errors.careLevelStartDate = '';
  errors.careLevelEndDate = '';
  
  const start = new Date(form.careLevelStartDate);
  const end = new Date(form.careLevelEndDate);
  
  if (start > end) {
    errors.careLevelEndDate = 'ì¢…ë£Œì¼ì€ ì‹œì‘ì¼ë³´ë‹¤ ì´í›„ì—¬ì•¼ í•©ë‹ˆë‹¤.';
    return false;
  }
  
  return true;
};

// ì „ì²´ Validation
const validateForm = () => {
  const nameValid = validateName();
  const birthdateValid = validateBirthdate();
  const phoneValid = validatePhone();
  const genderValid = validateGender();
  const addressValid = validateAddress();
  const levelValid = validateLevel();
  const numberValid = validateCareLevelNumber();
  const datesValid = validateDates();
  
  const isValid = nameValid && birthdateValid && phoneValid && genderValid && 
                  addressValid && levelValid && numberValid && datesValid;
  
  emit('validation-status', isValid);
  
  return isValid;
};

// ë§¤ì¹­ íƒœê·¸ í† ê¸€
const toggleMatchTag = (tag) => {
  const index = form.selectedMatchTags.indexOf(tag);
  if (index > -1) {
    form.selectedMatchTags.splice(index, 1);
  } else {
    form.selectedMatchTags.push(tag);
  }
};

// ìœ„í—˜ ìš”ì†Œ í† ê¸€
const toggleRisk = (risk) => {
  const index = form.selectedRisks.indexOf(risk);
  if (index > -1) {
    form.selectedRisks.splice(index, 1);
  } else {
    form.selectedRisks.push(risk);
  }
};

// ì¼ì • ì¶”ê°€
const addSchedule = () => {
  form.beneficiarySchedules.push({
    beneficiaryScheduleDay: '',
    beneficiaryScheduleStartTime: '',
    beneficiaryScheduleEndTime: ''
  });
};

// ì¼ì • ì‚­ì œ
const removeSchedule = (index) => {
  form.beneficiarySchedules.splice(index, 1);
};

// í¼ ë°ì´í„°ê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ í™•ì¸
const hasFormChanged = () => {
  if (!initialFormData.value) return false;
  
  return JSON.stringify(form) !== JSON.stringify(initialFormData.value);
};

// í¼ ë°ì´í„° ë³€ê²½ ê°ì§€
watch(() => ({ ...form }), () => {
  const hasChanges = hasFormChanged();
  emit('has-changes', hasChanges);
  
  if (hasChanges) {
    validateForm();
  }
}, { deep: true });

// API ë°ì´í„° ë¡œë“œ
const loadMatchTags = async () => {
  try {
    const response = await getMatchTagsApi();
    if (Array.isArray(response.data)) {
      matchTags.value = response.data.map(item => 
        typeof item === 'object' ? item.label : item
      );
    } else {
      matchTags.value = response.data;
    }
    console.log('âœ… ë§¤ì¹­ íƒœê·¸ ë¡œë“œ:', matchTags.value);
  } catch (error) {
    console.error('âŒ ë§¤ì¹­ íƒœê·¸ ë¡œë“œ ì‹¤íŒ¨:', error);
    matchTags.value = ['ë§ë²—', 'ì‚°ì±…', 'ìŒì•…', 'ì˜í™”', 'ê²Œì„', 'ì„œì˜ˆ', 'ìš”ë¦¬'];
  }
};

const loadRiskFactors = async () => {
  try {
    const response = await getRiskFactorsApi();
    if (Array.isArray(response.data)) {
      riskFactors.value = response.data.map(item => 
        typeof item === 'object' ? item.label : item
      );
    } else {
      riskFactors.value = response.data;
    }
    console.log('âœ… ìœ„í—˜ìš”ì†Œ ë¡œë“œ:', riskFactors.value);
  } catch (error) {
    console.error('âŒ ìœ„í—˜ìš”ì†Œ ë¡œë“œ ì‹¤íŒ¨:', error);
    riskFactors.value = ['ë‡Œì¡¸ì¦', 'ì¹˜ë§¤', 'ê±°ë™ë¶ˆí¸', 'ë‹¹ë‡¨', 'ê³ í˜ˆì••', 'ê³µê²©ì„±', 'ëª½ìœ ë³‘', 'ë‚™ìƒìœ„í—˜', 'ìš•ì°½ìœ„í—˜'];
  }
};

// ì´ˆê¸° ë°ì´í„° ë¡œë“œ
onMounted(async () => {
  console.log('ğŸ¨ RegistSubscription ë§ˆìš´íŠ¸');
  console.log('ğŸ“¦ ë°›ì€ initialData:', props.initialData);
  
  // API ë°ì´í„° ë¡œë“œ
  await loadMatchTags();
  await loadRiskFactors();
  
  // initialDataê°€ ìˆìœ¼ë©´ í¼ì— ì±„ìš°ê¸°
  if (props.initialData) {
    console.log('âœ… initialDataë¡œ í¼ ì±„ìš°ê¸°');
    Object.assign(form, props.initialData);
  }
  
  // ì¼ì •ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ 1ê°œ ì¶”ê°€
  if (!form.beneficiarySchedules || form.beneficiarySchedules.length === 0) {
    form.beneficiarySchedules = [{
      beneficiaryScheduleDay: '',
      beneficiaryScheduleStartTime: '',
      beneficiaryScheduleEndTime: ''
    }];
  }
  
  // ì´ˆê¸° ë°ì´í„° ì €ì¥ (ë³€ê²½ ê°ì§€ ê¸°ì¤€)
  initialFormData.value = JSON.parse(JSON.stringify(form));
  
  // ì´ˆê¸° validation ìƒíƒœ ì „ë‹¬
  validateForm();
});

// í¼ ë°ì´í„° ë°˜í™˜ (ë¶€ëª¨ì—ì„œ ì ‘ê·¼)
const getFormData = () => {
  console.log('ğŸ“¤ getFormData í˜¸ì¶œ:', form);
  return { ...form };
};

// ì €ì¥ í›„ ì´ˆê¸° ë°ì´í„° ì—…ë°ì´íŠ¸ (ë³€ê²½ ê°ì§€ ë¦¬ì…‹ìš©)
const resetChangeTracking = () => {
  initialFormData.value = JSON.parse(JSON.stringify(form));
  emit('has-changes', false);
};

defineExpose({
  getFormData,
  validateForm,
  resetChangeTracking
});
</script>

<style scoped>
/* 1. ì „ì²´ ì»¨í…Œì´ë„ˆ */
.advanced-info-container {
  width: 100%;
  background: transparent;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 20px;
  box-sizing: border-box;
}

.step-title {
  color: #111828;
  font-size: 18px;
  font-weight: 700;
  margin-bottom: 4px;
  margin-left: 0;
}

/* 2. ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.info-card {
  background: #FFFFFF;
  border: 1px solid #E5E7EB;
  border-radius: 12px;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.card-title {
  color: #374151;
  font-size: 15px;
  font-weight: 600;
  margin-bottom: 4px;
}

/* 3. ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ */
.input-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 20px;
}

.input-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.input-group.full-width {
  grid-column: 1 / -1;
}

.label {
  color: #4B5563;
  font-size: 13px;
  font-weight: 500;
}

.required {
  color: #DC2626;
  margin-left: 2px;
}

/* 4. ì…ë ¥ í•„ë“œ ìŠ¤íƒ€ì¼ */
.input-field {
  height: 42px;
  padding: 0 14px;
  background: #FFFFFF;
  border: 1px solid #D1D5DB;
  border-radius: 8px;
  font-size: 14px;
  color: #111827;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
  box-sizing: border-box;
  width: 100%;
}

.input-field:focus {
  border-color: #00A63E;
  box-shadow: 0 0 0 3px rgba(0, 166, 62, 0.1);
}

.input-field.error {
  border-color: #DC2626;
}

.input-field.error:focus {
  border-color: #DC2626;
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
}

.input-field::placeholder {
  color: #9CA3AF;
}

.error-message {
  color: #DC2626;
  font-size: 12px;
  margin-top: 4px;
}

/* ì•„ì´ì½˜ì´ ìˆëŠ” ì¸í’‹ ì»¨í…Œì´ë„ˆ */
.input-with-icon {
  position: relative;
  width: 100%;
}

.input-with-icon .input-field {
  padding-right: 40px;
}

.icon-svg {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 18px;
  height: 18px;
  color: #9CA3AF;
  pointer-events: none;
}

/* ë³´í˜¸ì ì •ë³´ (ì´ë¦„/ê´€ê³„) ë¶„í•  ë ˆì´ì•„ì›ƒ */
.split-inputs {
  display: flex;
  gap: 10px;
}

.flex-grow {
  flex: 1;
}

.relation-box {
  width: 100px;
  flex: none;
}

/* 5. ì¹© ë²„íŠ¼ ìŠ¤íƒ€ì¼ (íƒœê·¸/ìœ„í—˜ìš”ì†Œ) */
.chip-group {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.chip-btn {
  padding: 8px 16px;
  background: #F3F4F6;
  border: 1px solid #D1D5DB;
  border-radius: 20px;
  font-size: 14px;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s;
  user-select: none;
}

.chip-btn:hover {
  background: #E5E7EB;
  border-color: #9CA3AF;
}

/* í™œì„±í™” ìƒíƒœ (ì´ˆë¡ìƒ‰) */
.chip-btn.active {
  background: #00A63E;
  border-color: #00A63E;
  color: white;
  font-weight: 500;
}

/* ìœ„í—˜ìš”ì†Œ í™œì„±í™” ìƒíƒœ (ë¹¨ê°„ìƒ‰) */
.chip-btn.danger.active {
  background: #DC2626;
  border-color: #DC2626;
  color: white;
  font-weight: 500;
}

/* ì¼ì • ê´€ë¦¬ */
.schedule-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.schedule-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.schedule-select, .schedule-time {
  height: 40px;
  padding: 0 12px;
  border: 1px solid #D1D5DB;
  border-radius: 6px;
  font-size: 14px;
  outline: none;
}

.schedule-select {
  flex: 1;
}

.schedule-time {
  width: 120px;
}

.time-separator {
  color: #6B7280;
  font-size: 14px;
}

.btn-delete-schedule {
  padding: 8px 16px;
  background: #FEE2E2;
  border: 1px solid #FCA5A5;
  border-radius: 6px;
  font-size: 13px;
  color: #DC2626;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-delete-schedule:hover {
  background: #FCA5A5;
  color: #991B1B;
}

.btn-add-schedule {
  padding: 10px 16px;
  background: #E0F2FE;
  border: 1px solid #7DD3FC;
  border-radius: 6px;
  font-size: 14px;
  color: #0369A1;
  cursor: pointer;
  transition: all 0.2s;
  margin-top: 8px;
}

.btn-add-schedule:hover {
  background: #7DD3FC;
  color: #014361;
}

/* ë°˜ì‘í˜• */
@media (max-width: 640px) {
  .input-grid {
    grid-template-columns: 1fr;
  }
  .schedule-item {
    flex-wrap: wrap;
  }
  .schedule-select, .schedule-time {
    width: 100%;
  }
}
</style>
